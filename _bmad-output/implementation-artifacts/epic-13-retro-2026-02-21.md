# Retrospective — Epic 13: Operational Safety & Tooling

> Date: 2026-02-21 | Reviewer: Claude Opus 4.6 | Format: Condensed (combined Sprint 4 retro)

## Epic Summary

- **Epic:** 13 — Operational Safety & Tooling
- **Stories:** 2/2 done (13-1, 13-2)
- **Backlog items closed:** B-11 (deployment safety header), B-12 (CRLF verification)
- **FRs covered:** FR22-FR28 | **NFRs:** NFR10-NFR12

## Delivery Metrics

- Completion: 100% (2/2 stories)
- Code review findings: 5 (0 HIGH, 3 MEDIUM, 2 LOW)
- Technical debt created: 0
- Production incidents: 0

## What Went Well

1. **Deployment safety is now real** — `zip_to_s3.sh` displays AWS account, profile, environment before any upload. `--yes` flag preserved for automation. Default-abort confirmation prevents accidental cross-account deployments.
2. **CRLF investigation formally closed** — B-12 verified all 29 parameter files have LF endings, `.gitattributes` enforces `* text=auto eol=lf`. Root cause documented (Windows `core.autocrlf`, not file content).
3. **Code review caught env var validation gap** — 13-1 review found that ENVIRONMENT and PROJECT_NAME were used in Lambda naming but not validated before deployment. Fixed immediately.

## What Could Be Better

1. **13-1 initial implementation missed env var validation** — safety-critical script launched without complete guard. Code review caught it, but ideally validation should be part of the first implementation pass.
2. **13-2 documentation referenced line numbers** — fragile reference pattern, fixed in review. Lesson: never reference specific line numbers in other files.

## Key Learnings

- Verification-driven closure is an effective pattern for investigation items
- Safety-critical bash scripts need exhaustive env var validation (not just the obvious ones)
- Documentation references should be stable (section names, not line numbers)

## Previous Retro Follow-Through (Epic 12)

- ✅ Code review mandatory → Applied to both stories
- ✅ Commit checkpoints → Applied
- ✅ Emergent items → backlog triage → No new items needed (clean epic)

## Action Items

1. Continue mandatory code review for all story types
2. For safety-critical scripts: enumerate ALL env vars used, validate ALL of them
3. Run `verify-documentation-metrics.sh` after infrastructure changes
